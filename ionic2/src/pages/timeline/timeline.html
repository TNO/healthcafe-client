<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>All measurements</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="presentPopover($event)">
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <div *ngIf="loading">
    <ion-spinner></ion-spinner> Loading...
  </div>
  <p *ngIf="!loading && events.length == 0">
    Voeg nieuwe metingen toe (top right <i class="ion ion-plus"></i> button) or <a href="#/app/share/healthcafe">import from healthcafe.</a>
  </p>

  <timeline>
    <timeline-event id="event-{{event.id}}" *ngFor="let event of events" side="left" ngClass="{removed: event.removed}">
      <timeline-badge class="{{event.badgeClass}}">
        <ion-icon name="{{event.badgeIconClass}}"></ion-icon>
      </timeline-badge>
      <timeline-panel class="{{event.badgeClass}} item-icon-right" ng-click="event.showDetail();">
        <timeline-heading>
          <h4 *ngIf="event.type == 'intervention'">{{event.message}}</h4>
          <h4 *ngIf="event.measurementType == 'blood-glucose'">Bloedglucose: {{event.datapoint.body.blood_glucose.value}} {{event.datapoint.body.blood_glucose.unit}}
            <span class="datapoint-details" ng-show="event.datapoint.body.temporal_relationship_to_meal">{{event.datapoint.body.temporal_relationship_to_meal}}</span>
          </h4>
          <h4 *ngIf="event.measurementType == 'blood-pressure'">Bloeddruk: {{event.datapoint.body.systolic_blood_pressure.value}} / {{event.datapoint.body.diastolic_blood_pressure.value}}</h4>
          <h4 *ngIf="event.measurementType == 'body-fat-percentage'">Lichaamsvet: {{event.datapoint.body.body_fat_percentage.value}} {{event.datapoint.body.body_fat_percentage.unit}}</h4>
          <h4 *ngIf="event.measurementType == 'body-mass-index'">BMI: {{event.datapoint.body.body_mass_index.value | number}} {{event.datapoint.body.body_mass_index.unit}}</h4>
          <h4 *ngIf="event.measurementType == 'body-weight'">Lichaamsgewicht: {{event.datapoint.body.body_weight.value}} {{event.datapoint.body.body_weight.unit}}</h4>
          <h4 *ngIf="event.measurementType == 'waist-circumference'">Taille omtrek: {{event.datapoint.body.waist_circumference.value}} {{event.datapoint.body.waist_circumference.unit}}</h4>
          <h4 *ngIf="event.measurementType == 'cholesterol'">Cholesterol: {{event.datapoint.body.blood_total_cholesterol.value}} {{event.datapoint.body.blood_total_cholesterol.unit}}
            <span class="datapoint-details cholesterol-details">
                <span *ngIf="event.datapoint.body.blood_ldl_cholesterol && event.datapoint.body.blood_ldl_cholesterol.value" class="cholesterol-detail">LDL: {{event.datapoint.body.blood_ldl_cholesterol.value}} {{event.datapoint.body.blood_ldl_cholesterol.unit}}</span>
                <span *ngIf="event.datapoint.body.blood_hdl_cholesterol && event.datapoint.body.blood_hdl_cholesterol.value" class="cholesterol-detail">HDL: {{event.datapoint.body.blood_hdl_cholesterol.value}} {{event.datapoint.body.blood_hdl_cholesterol.unit}}</span>
                <span *ngIf="event.datapoint.body.blood_triglycerides && event.datapoint.body.blood_triglycerides.value" class="cholesterol-detail">Triglycerides: {{event.datapoint.body.blood_triglycerides.value}} {{event.datapoint.body.blood_triglycerides.unit}}</span>
              </span>
          </h4>
          <p><small class="text-muted"><ion-icon name="clock"></ion-icon>{{event.date | date}}</small></p>
          <a class="icon delete-icon" *ngIf="event.model" (click)="timeline.remove(event); $event.stopPropagation();">
            <ion-icon name="trash"></ion-icon>
          </a>
        </timeline-heading>
      </timeline-panel>
    </timeline-event>
  </timeline>

</ion-content>
